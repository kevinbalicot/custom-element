<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title></title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/2.2.0/webcomponents-bundle.js" charset="utf-8"></script>
        <script src="src/dom.js" charset="utf-8"></script>
        <script src="src/component.js" charset="utf-8"></script>
    </head>
    <body>
        <!--<template id="t">
            <input type="text">
            <h2>{{ message }}</h2>
            <p>{{ i }}</p>
            <button id="btn1">Click here</button>
            <button id="btn2">MAGIC {{ display }}</button>
            <button id="btn3">EXTEND THE TAAAABLEUUUH</button>
            <div if="display">
                PIOUF ! IT'S MAGIC <b>{{ display }}</b>
            </div>
            <div for="let y of tabs" if="y != 0">{{ y }}</div>
        </template>-->

        <!--<my-component message="toto"></my-component>-->
        <!--<my-component message="tata"></my-component>-->

        <!--<title-component title="Tamia"></title-component>-->

        <container-component></container-component>

        <template id="container-template">
            <p>{{ message }}</p>
            <p if="message === 'toto'">AHAH</p>
            <button>Click on me <3</button>

            <a href="#/1">1</a>
            <a href="#/2">2</a>
            <a href="#/3">3</a>

            <p route="/1">1</p>
            <p route="/2">2</p>
            <p route="/3">3</p>
        </template>

        <template id="title-template">
            <h2>{{ title }}</h2>
        </template>

        <script type="text/javascript">
            class Title extends Component {
                constructor() {
                    super();

                    this.setState({ title: 'Hello world' });
                }
            }

            component({
                template: document.querySelector('template#title-template'),
                selector: 'title-component',
                inputs: ['title']
            })(Title);

            class Container extends Component {
                constructor() {
                    super();

                    this.state.set({ message: 'foo' });
                }

                onAfterViewInit() {
                    this.get('button').on('click', () => {
                        this.state.message = 'toto';
                    });
                }
            }

            component({
                template: document.querySelector('template#container-template'),
                selector: 'container-component'
            })(Container);

            /*class MyComponent extends Component {
                constructor() {
                    super();

                    this.setState({ message: 'Bonjour', i: 0, display: true, tabs: [1, 2, 3] });
                }

                onAfterViewInit() {
                    this.get('button#btn1').on('click', () => this.setState({ i: ++this.state.i }));
                    this.get('button#btn2').on('click', () => this.setState({ display: !this.state.display }));
                    this.get('button#btn3').on('click', () => {
                        this.state.tabs.push(this.state.i);
                        this.setState({ tabs: this.state.tabs });
                    });
                    this.get('input').on('keyup', ({ target }) => this.setState({ message: target.value }));
                }
            }

            component({
                template: document.querySelector('#t'),
                selector: 'my-component',
                inputs: ['message']
            })(MyComponent);

            const el = document.querySelector('my-component');
            //el.addEventListener('toto', () => console.log('lol'));
            setTimeout(() => el.setAttribute('message', 'tata'), 2000);
            setTimeout(() => el.setState('message', 'ok'), 4000);

            //setTimeout(() => el.remove(), 3000);*/

        </script>
    </body>
</html>
