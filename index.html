<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title></title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.0.0/polyfill.min.js" charset="utf-8"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/2.2.0/webcomponents-bundle.js" charset="utf-8"></script>
        <script src="src/index.js" charset="utf-8"></script>
    </head>
    <body>
        <container-component></container-component>

        <template id="container-template">
            <button id="a">Click</button>
            <button id="b">Click color</button>
            <button id="c">Click hidden</button>
            <button id="d">Click Add</button>
            <div if="display">
                <p [innerHTML]="message+'toto'" [class.toto]="false"></p>
                <p [style.color]="color" [innerHTML]="message"></p>
                <b for="let i of tabs" [innerHTML]="i"></b>
            </div>

            <a href="/#/1">1</a>
            <a href="/#/2">2</a>
            <a href="/#/3">3</a>

            <p route="/1">A</p>
            <p route="/2">B</p>
            <p route="/3">C</p>
        </template>

        <template id="title-template">
            <h2>{{ title }}</h2>
        </template>

        <script type="text/javascript">
            class Service {
                constructor() {
                    console.log('toto');
                }
            }

            service({})(Service)

            class Container extends HTMLElement {
                constructor() {
                    super();

                    this.state.set({ display: true, message: 'foo', color: 'red', tabs: [1,2,3] });
                }

                onAfterViewInit() {
                    this.get('button#a').on('click', () => {
                        this.state.message = 'toto';
                    });

                    this.get('button#b').on('click', () => {
                        this.state.color = 'green';
                    });

                    this.get('button#c').on('click', () => {
                        this.state.display = !this.state.display;
                    });

                    this.get('button#d').on('click', () => {
                        this.state.tabs.push(Math.round(Math.random()*5));
                        this.state.tabs = this.state.tabs;
                    });
                }
            }

            component({
                template: document.querySelector('template#container-template'),
                selector: 'container-component'
            })(Container);
        </script>
    </body>
</html>
